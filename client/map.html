<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map</title>
    <link rel="stylesheet" href="map.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="apple-touch-icon" sizes="180x180" href="./images/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="./images/favicon-16x16.png">
<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

</head>
<body>
    <!-- First Navbar -->
    <nav class="first-navbar">
        <div class="container">
            <div class="logo">AirAlly</div>
            <div class="search-box">
                <input type="text" id="search-input" placeholder="Search AQI of cities...">
                <i class="fas fa-search" id="search-icon"  style="color: #287e74;"></i>
            </div>
            <div class="user-profile">
                <div class="user-icon"></div>
                <i class="fa-solid fa-user fa-2xl" style="color: #287e74;"></i>
                <div class="dropdown-content">
                    <a href="./login.html">Logout</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Second Navbar -->
    <nav class="second-navbar">
        <div class="container">
            <ul class="nav-links">
                <li><a href="./home.html">Home</a></li>
                <li><a href="./map.html">Map</a></li>
            </ul>
        </div>
    </nav>

    <!-- Content Section -->
    <div class="content">
        <!-- Left Section for Map -->
        <div class="left-section">
            <!-- Map will be rendered here -->
            <div id="map"></div>
        </div>

        <!-- Right Section for Nearby Places -->
        <div class="right-section">
            <h2 class="nearby-places">Nearby Places</h2>
            <!-- Table for listing places and their AQI -->
            <table>
                <thead>
                    <tr>
                        <th>Place</th>
                        <th>AQI</th>
                    </tr>
                </thead>
                <tbody id="t-body">
                </tbody>
            </table>
        </div>
    </div>


    <script>  
          var  OSM_URL  =  'http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png';  
          var  OSM_ATTRIB  =  '&copy;  <a  href="http://openstreetmap.org/copyright">OpenStreetMap</a>  contributors';  
          var  osmLayer  =  L.tileLayer(OSM_URL,  {  attribution:  OSM_ATTRIB  });  
      
          var  WAQI_URL  =  "https://tiles.waqi.info/tiles/usepa-aqi/{z}/{x}/{y}.png?token=d1f9e26d4634954a0523b621749b1bddb655e8c1";  
          var  WAQI_ATTR  =  'Air  Quality  Tiles  &copy;  <a  href="http://waqi.info">waqi.info</a>';  
          var  waqiLayer  =  L.tileLayer(WAQI_URL,  {  attribution:  WAQI_ATTR  });  
          var x = localStorage.getItem("Latitude") || 27.71
          var y = localStorage.getItem("Longitude") || 85.32
          var  map  =  L.map('map').setView([x,  y],  13);  
          map.addLayer(osmLayer).addLayer(waqiLayer);  
    </script>
<!--     
    <script>
      // Initialize the map
      var  map  =  L.map('map').setView(new L.LatLng(40.737, -73.923), 12);  
    
      // Add a tile layer (e.g., OpenStreetMap) to the map
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
      }).addTo(map);
    
      // // Add a marker to the map
      // L.marker([51.5, -0.09]).addTo(map)
      //   .bindPopup('A pretty CSS3 popup.<br> Easily customizable.')
      //   .openPopup();
      var  WAQI_URL  =  "https://tiles.waqi.info/tiles/usepa-aqi/{z}/{x}/{y}.png?token=d1f9e26d4634954a0523b621749b1bddb655e8c1";  
      var  WAQI_ATTR  =  'Air  Quality  Tiles  &copy;  <a  href="http://waqi.info">waqi.info</a>';  
      var  waqiLayer  =  L.tileLayer(WAQI_URL,  {  attribution:  WAQI_ATTR  });  
  
      map.addLayer(osmLayer).addLayer(waqiLayer);  

    </script> -->
    <script src="map.js"></script>
    </body>
</html>
